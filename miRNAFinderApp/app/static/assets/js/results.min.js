function update_progress(e,t){$.getJSON(e,(function(s){if(percent=parseInt(100*s.current/s.total),$(t.childNodes[1]).text(s.status),$(t.childNodes[3].childNodes[1]).attr({"aria-valuenow":percent,style:"width:"+percent+"%;"}),"PENDING"!=s.state&&"PROGRESS"!=s.state)if("duration"in s){var n=$('<input type="text" name="task_id" value="'+s.task_id+'" /><input type="text" name="duration" value="'+s.duration+'" />');$("#results-req").append(n),setTimeout((function(){$("#results-req").submit()}),1e3)}else $(t.childNodes[5]).text("Result: "+s.state);else setTimeout((function(){update_progress(e,t)}),2e3)}))}$("#predict").click((async function(e){e.preventDefault();var t="";const s=$("#fafile").prop("files")[0];if(s){const e=new FileReader;e.readAsText(s),t=await new Promise((t,s)=>{e.onload=function(s){t(e.result)}})}(t=t||$("#sequence").val())?$.ajax({url:"/validate",data:JSON.stringify({seq:t}),type:"POST",contentType:"application/json",success:function(e){if(e.valid){$("#submit-seq").hide(),$("#progress").show();var s=document.getElementById("progress").childNodes[1];$.ajax({url:"/predict",data:JSON.stringify({seq:t}),type:"POST",contentType:"application/json",success:function(e,t,n){status_url=n.getResponseHeader("Location"),update_progress(status_url,s)},error:function(){alert("Unexpected error")}})}else alert(e.msg)}}):alert("Please input sequence(s)!")})),$("#examp").click((function(){$("#sequence").val(">gra-MIR8786a MI0027833 \nAAGUAUGCAUUUUUAGUGAUGUGGCAGAAAGAUGCAUUAAAAACGCUUCCAGACGAACUUUUAAUGCAUCUUUCUGCCACAUUAUUGAUAAUGUGCCUUG \n>pseudo-seq \nCCUACCUAUGAGUUUUGAAGAUCGUGUCGCAGCAGUUGGAAUUGCCACACAGUUUCAGGAACGCU \n>stu-MIR5303b MI0025766 \nACCCGUGUUGGAUUCUCCGAAAAUACACUACUUUUGGAGAAUCCGACACGCACCC")}));